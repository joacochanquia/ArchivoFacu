TIMER 	EQU 	10H
PIC 	EQU 	20H
EOI 	EQU 	20H
N_CLK 	EQU 	10
	ORG 	40
IP_CLK 	DW 	RUT_CLK
	ORG 	1000H
SEG 	DB 	32H
	DB 	38H
FIN 	DB 	?
MSJ 	DB 	"INGRESE UN NUMERO:"
FIN_MS 	DB 	?
	ORG 	3000H
RUT_CLK:PUSH 	AX
	DEC 	SEG+1
	CMP 	SEG+1, 2FH
	JNZ 	RESET
	MOV 	SEG+1, 39H
	DEC 	SEG
	CMP 	SEG, 2FH
	JNZ 	RESET
	IN	AL, PIC+1
	OR	AL, 2
	OUT	PIC+1, AL
	MOV	DL, 0FFH
	JMP	FIN_C
RESET: 	INT 	7
FIN_C:	MOV 	AL, 0
	OUT 	TIMER, AL
	MOV 	AL, EOI
	OUT 	PIC, AL
	POP 	AX
	IRET
	ORG 	2000H
	CLI
	MOV 	AL, 0FDH
	OUT 	PIC+1, AL ; PIC: registro IMR
	MOV 	AL, N_CLK
	OUT 	PIC+5, AL ; PIC: registro INT1
	MOV 	AL, 1
	OUT 	TIMER+1, AL ; TIMER: registro COMP
	MOV 	AL, 0
	OUT 	TIMER, AL ; TIMER: registro CONT
	MOV 	BX, OFFSET MSJ
	MOV 	AL, OFFSET FIN_MS-OFFSET MSJ
	INT 	7
	MOV 	BX, OFFSET SEG
	INT 	6
	INC	BX
	INT 	6
	DEC 	BX
	MOV 	AL, OFFSET FIN-OFFSET SEG
	INT 	7
	MOV	DL, 00H
	STI
LAZO: 	CMP	DL, 00H
	JZ 	LAZO
	HLT
	END
